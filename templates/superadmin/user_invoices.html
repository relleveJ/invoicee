{% extends 'base.html' %}
{% block content %}
<h1>Invoices for {{ target_user.username }}</h1>
<form method="get" class="form-inline">
  <input type="text" name="q" value="{{ q }}" placeholder="Search" />
  <select name="status">
    <option value="">Any</option>
    <option value="draft" {% if status == 'draft' %}selected{% endif %}>Draft</option>
    <option value="sent" {% if status == 'sent' %}selected{% endif %}>Sent</option>
    <option value="paid" {% if status == 'paid' %}selected{% endif %}>Paid</option>
    <option value="overdue" {% if status == 'overdue' %}selected{% endif %}>Overdue</option>
  </select>
  <button type="submit">Filter</button>
</form>
<table>
  <tr><th>Invoice #</th><th>Client</th><th>Date</th><th>Status</th><th>Total</th></tr>
  {% for inv in invoices_page.object_list %}
  <tr>
    <td><a href="{% url 'invoice_detail' inv.pk %}">{{ inv.invoice_number }}</a></td>
    <td>{% if inv.client_name %}{{ inv.client_name }}{% else %}{{ inv.client.name }}{% endif %}</td>
    <td>{{ inv.invoice_date }}</td>
    <td>{{ inv.status }}</td>
    <td>{{ inv.total_amount }}</td>
  </tr>
  {% empty %}
  <tr><td colspan="5">No invoices found.</td></tr>
  {% endfor %}
</table>
<div>
  {% if invoices_page.has_previous %}<a href="?page={{ invoices_page.previous_page_number }}">Prev</a>{% endif %}
  Page {{ invoices_page.number }} of {{ invoices_page.paginator.num_pages }}
  {% if invoices_page.has_next %}<a href="?page={{ invoices_page.next_page_number }}">Next</a>{% endif %}
</div>
{% endblock %}
